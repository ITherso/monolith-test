{% extends "base.html" %}

{% block title %}Decentralized Pentest Network - MONOLITH{% endblock %}

{% block content %}
<style>
    .neon-purple::before { background: linear-gradient(135deg, rgba(139, 92, 246, 0.4), transparent, rgba(167, 139, 250, 0.4)) !important; }
    .neon-emerald::before { background: linear-gradient(135deg, rgba(16, 185, 129, 0.4), transparent, rgba(52, 211, 153, 0.4)) !important; }
    .neon-amber::before { background: linear-gradient(135deg, rgba(245, 158, 11, 0.4), transparent, rgba(251, 191, 36, 0.4)) !important; }
    .neon-cyan::before { background: linear-gradient(135deg, rgba(6, 182, 212, 0.4), transparent, rgba(45, 212, 191, 0.4)) !important; }
    .neon-red::before { background: linear-gradient(135deg, rgba(239, 68, 68, 0.4), transparent, rgba(248, 113, 113, 0.4)) !important; }
    .neon-blue::before { background: linear-gradient(135deg, rgba(59, 130, 246, 0.4), transparent, rgba(96, 165, 250, 0.4)) !important; }
    .neon-fuchsia::before { background: linear-gradient(135deg, rgba(217, 70, 239, 0.4), transparent, rgba(232, 121, 249, 0.4)) !important; }
    
    .pulse-dot { animation: pulse-dot 2s infinite; }
    @keyframes pulse-dot {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.2); }
    }
    
    .node-glow { box-shadow: 0 0 20px rgba(139, 92, 246, 0.3); }
    .task-hover:hover { transform: translateX(5px); border-left-color: #a78bfa !important; }
</style>

<div class="min-h-screen p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="mb-8">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-purple-500/30">
                    <i class="fas fa-network-wired text-3xl text-white"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-violet-400 via-purple-400 to-fuchsia-400 text-transparent bg-clip-text">
                        Decentralized Pentest Network
                    </h1>
                    <p class="text-gray-400 mt-1">Distributed Node Marketplace ‚Ä¢ P2P Task Distribution ‚Ä¢ Collaborative Security Operations</p>
                </div>
            </div>
        </div>

        <!-- Status Cards -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
            <div class="glass rounded-xl p-4 border border-purple-500/20 neon-border neon-purple">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center">
                        <i class="fas fa-server text-xl text-purple-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Total Nodes</p>
                        <p class="text-2xl font-bold text-purple-400" id="totalNodes">12</p>
                    </div>
                </div>
            </div>
            
            <div class="glass rounded-xl p-4 border border-emerald-500/20 neon-border neon-emerald">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-lg bg-emerald-500/20 flex items-center justify-center">
                        <i class="fas fa-check-circle text-xl text-emerald-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Online</p>
                        <p class="text-2xl font-bold text-emerald-400" id="onlineNodes">8</p>
                    </div>
                </div>
            </div>
            
            <div class="glass rounded-xl p-4 border border-amber-500/20 neon-border neon-amber">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-lg bg-amber-500/20 flex items-center justify-center">
                        <i class="fas fa-spinner text-xl text-amber-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Busy</p>
                        <p class="text-2xl font-bold text-amber-400" id="busyNodes">3</p>
                    </div>
                </div>
            </div>
            
            <div class="glass rounded-xl p-4 border border-cyan-500/20 neon-border neon-cyan">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-lg bg-cyan-500/20 flex items-center justify-center">
                        <i class="fas fa-tasks text-xl text-cyan-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Active Tasks</p>
                        <p class="text-2xl font-bold text-cyan-400" id="activeTasks">47</p>
                    </div>
                </div>
            </div>
            
            <div class="glass rounded-xl p-4 border border-fuchsia-500/20 neon-border neon-fuchsia">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-lg bg-fuchsia-500/20 flex items-center justify-center">
                        <i class="fas fa-tachometer-alt text-xl text-fuchsia-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Avg Load</p>
                        <p class="text-2xl font-bold text-fuchsia-400" id="avgLoad">34%</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column - Discovery & Topology -->
            <div class="space-y-6">
                <!-- Node Discovery -->
                <div class="glass rounded-2xl neon-border neon-purple overflow-hidden">
                    <div class="bg-gradient-to-r from-purple-500/20 to-violet-500/20 px-6 py-4 border-b border-purple-500/20">
                        <h3 class="text-lg font-bold text-purple-400 flex items-center gap-2">
                            <i class="fas fa-radar"></i>
                            Node Discovery
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-2">
                                <i class="fas fa-broadcast-tower text-purple-400 mr-2"></i>Discovery Range
                            </label>
                            <select id="discoveryRange" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-purple-500/50">
                                <option value="local">Local Network (192.168.x.x)</option>
                                <option value="vpn">VPN Subnet (10.x.x.x)</option>
                                <option value="tor">Tor Hidden Services</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-2">
                                <i class="fas fa-filter text-violet-400 mr-2"></i>Node Type Filter
                            </label>
                            <select id="nodeTypeFilter" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-purple-500/50">
                                <option value="all">All Nodes</option>
                                <option value="scanner">üîç Scanners Only</option>
                                <option value="exploit">üí• Exploit Engines</option>
                                <option value="enum">üìã Enumerators</option>
                                <option value="c2">üéØ C2 Nodes</option>
                            </select>
                        </div>
                        
                        <div id="discoveryStatus" class="hidden p-4 rounded-xl bg-purple-500/10 border border-purple-500/30">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 rounded-full bg-purple-400 pulse-dot"></div>
                                <span class="text-purple-300 text-sm">Scanning network... Found <span id="foundNodes">0</span> nodes</span>
                            </div>
                        </div>
                        
                        <button onclick="startDiscovery()" class="w-full py-3 rounded-xl bg-gradient-to-r from-purple-500/20 to-violet-500/20 border border-purple-500/30 text-purple-400 font-semibold hover:from-purple-500/30 hover:to-violet-500/30 transition-all">
                            <i class="fas fa-play mr-2"></i>Start Discovery
                        </button>
                    </div>
                </div>
                
                <!-- Network Topology -->
                <div class="glass rounded-2xl neon-border neon-cyan overflow-hidden">
                    <div class="bg-gradient-to-r from-cyan-500/20 to-teal-500/20 px-6 py-4 border-b border-cyan-500/20">
                        <h3 class="text-lg font-bold text-cyan-400 flex items-center gap-2">
                            <i class="fas fa-share-alt"></i>
                            Network Topology
                        </h3>
                    </div>
                    <div class="p-6">
                        <div class="h-48 flex items-center justify-center">
                            <canvas id="topologyChart"></canvas>
                        </div>
                        <div class="flex justify-center gap-6 mt-4 text-sm">
                            <span class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-emerald-400"></span>
                                <span class="text-gray-400">Online</span>
                            </span>
                            <span class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-amber-400"></span>
                                <span class="text-gray-400">Busy</span>
                            </span>
                            <span class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-red-400"></span>
                                <span class="text-gray-400">Offline</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Center Column - Available Nodes -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Available Nodes -->
                <div class="glass rounded-2xl neon-border neon-emerald overflow-hidden">
                    <div class="bg-gradient-to-r from-emerald-500/20 to-green-500/20 px-6 py-4 border-b border-emerald-500/20 flex items-center justify-between">
                        <h3 class="text-lg font-bold text-emerald-400 flex items-center gap-2">
                            <i class="fas fa-server"></i>
                            Available Nodes
                        </h3>
                        <button onclick="refreshNodes()" class="text-emerald-400 hover:text-emerald-300 transition-colors">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="p-4 max-h-96 overflow-y-auto space-y-3" id="nodesList">
                        <!-- Node 1 - Online Scanner -->
                        <div class="p-4 rounded-xl bg-white/5 border border-emerald-500/30 hover:border-emerald-500/50 transition-all node-glow">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center">
                                        <i class="fas fa-desktop text-emerald-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">SHADOW-SCANNER-01</h4>
                                        <p class="text-xs text-gray-400">192.168.1.101</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-1 rounded text-xs bg-purple-500/20 text-purple-400 border border-purple-500/30">SCANNER</span>
                                    <span class="px-2 py-1 rounded text-xs bg-cyan-500/20 text-cyan-400 border border-cyan-500/30">NMAP</span>
                                    <span class="flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">
                                        <span class="w-2 h-2 rounded-full bg-emerald-400 pulse-dot"></span>ONLINE
                                    </span>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 text-center mb-3">
                                <div>
                                    <p class="text-lg font-bold text-cyan-400">4/8</p>
                                    <p class="text-xs text-gray-500">Slots</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-amber-400">45%</p>
                                    <p class="text-xs text-gray-500">Load</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-purple-400">12ms</p>
                                    <p class="text-xs text-gray-500">Latency</p>
                                </div>
                            </div>
                            <div class="h-2 rounded-full bg-white/5 overflow-hidden">
                                <div class="h-full rounded-full bg-gradient-to-r from-emerald-500 to-cyan-500" style="width: 45%"></div>
                            </div>
                        </div>
                        
                        <!-- Node 2 - Busy Exploit -->
                        <div class="p-4 rounded-xl bg-white/5 border border-amber-500/30 hover:border-amber-500/50 transition-all">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center">
                                        <i class="fas fa-server text-amber-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">SHADOW-EXPLOIT-01</h4>
                                        <p class="text-xs text-gray-400">192.168.1.102</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-1 rounded text-xs bg-red-500/20 text-red-400 border border-red-500/30">EXPLOIT</span>
                                    <span class="px-2 py-1 rounded text-xs bg-fuchsia-500/20 text-fuchsia-400 border border-fuchsia-500/30">MSF</span>
                                    <span class="flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-amber-500/20 text-amber-400 border border-amber-500/30">
                                        <span class="w-2 h-2 rounded-full bg-amber-400 pulse-dot"></span>BUSY
                                    </span>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 text-center mb-3">
                                <div>
                                    <p class="text-lg font-bold text-cyan-400">6/8</p>
                                    <p class="text-xs text-gray-500">Slots</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-red-400">78%</p>
                                    <p class="text-xs text-gray-500">Load</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-purple-400">8ms</p>
                                    <p class="text-xs text-gray-500">Latency</p>
                                </div>
                            </div>
                            <div class="h-2 rounded-full bg-white/5 overflow-hidden">
                                <div class="h-full rounded-full bg-gradient-to-r from-amber-500 to-red-500" style="width: 78%"></div>
                            </div>
                        </div>
                        
                        <!-- Node 3 - BloodHound -->
                        <div class="p-4 rounded-xl bg-white/5 border border-emerald-500/30 hover:border-emerald-500/50 transition-all">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center">
                                        <i class="fas fa-laptop text-blue-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">SHADOW-ENUM-02</h4>
                                        <p class="text-xs text-gray-400">10.0.0.45</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-1 rounded text-xs bg-blue-500/20 text-blue-400 border border-blue-500/30">ENUM</span>
                                    <span class="px-2 py-1 rounded text-xs bg-red-500/20 text-red-400 border border-red-500/30">BLOODHOUND</span>
                                    <span class="flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">
                                        <span class="w-2 h-2 rounded-full bg-emerald-400 pulse-dot"></span>ONLINE
                                    </span>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 text-center mb-3">
                                <div>
                                    <p class="text-lg font-bold text-cyan-400">2/8</p>
                                    <p class="text-xs text-gray-500">Slots</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-emerald-400">22%</p>
                                    <p class="text-xs text-gray-500">Load</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-purple-400">45ms</p>
                                    <p class="text-xs text-gray-500">Latency</p>
                                </div>
                            </div>
                            <div class="h-2 rounded-full bg-white/5 overflow-hidden">
                                <div class="h-full rounded-full bg-gradient-to-r from-emerald-500 to-blue-500" style="width: 22%"></div>
                            </div>
                        </div>
                        
                        <!-- Node 4 - C2 Node -->
                        <div class="p-4 rounded-xl bg-white/5 border border-emerald-500/30 hover:border-emerald-500/50 transition-all">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-fuchsia-500/20 flex items-center justify-center">
                                        <i class="fas fa-satellite-dish text-fuchsia-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">SHADOW-C2-MASTER</h4>
                                        <p class="text-xs text-gray-400">10.0.0.1</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-1 rounded text-xs bg-fuchsia-500/20 text-fuchsia-400 border border-fuchsia-500/30">C2</span>
                                    <span class="px-2 py-1 rounded text-xs bg-violet-500/20 text-violet-400 border border-violet-500/30">COBALT</span>
                                    <span class="flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">
                                        <span class="w-2 h-2 rounded-full bg-emerald-400 pulse-dot"></span>ONLINE
                                    </span>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 text-center mb-3">
                                <div>
                                    <p class="text-lg font-bold text-cyan-400">1/16</p>
                                    <p class="text-xs text-gray-500">Slots</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-emerald-400">12%</p>
                                    <p class="text-xs text-gray-500">Load</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-purple-400">3ms</p>
                                    <p class="text-xs text-gray-500">Latency</p>
                                </div>
                            </div>
                            <div class="h-2 rounded-full bg-white/5 overflow-hidden">
                                <div class="h-full rounded-full bg-gradient-to-r from-fuchsia-500 to-violet-500" style="width: 12%"></div>
                            </div>
                        </div>
                        
                        <!-- Node 5 - Offline -->
                        <div class="p-4 rounded-xl bg-white/5 border border-red-500/30 opacity-60">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center">
                                        <i class="fas fa-server text-red-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white">SHADOW-RECON-03</h4>
                                        <p class="text-xs text-gray-400">192.168.1.150</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-1 rounded text-xs bg-cyan-500/20 text-cyan-400 border border-cyan-500/30">RECON</span>
                                    <span class="flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-red-500/20 text-red-400 border border-red-500/30">
                                        <span class="w-2 h-2 rounded-full bg-red-400"></span>OFFLINE
                                    </span>
                                </div>
                            </div>
                            <div class="text-center text-gray-500 text-sm py-2">
                                <i class="fas fa-exclamation-triangle mr-2"></i>Last seen: 2 hours ago
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Task Distribution -->
                <div class="glass rounded-2xl neon-border neon-amber overflow-hidden">
                    <div class="bg-gradient-to-r from-amber-500/20 to-orange-500/20 px-6 py-4 border-b border-amber-500/20 flex items-center justify-between">
                        <h3 class="text-lg font-bold text-amber-400 flex items-center gap-2">
                            <i class="fas fa-tasks"></i>
                            Task Distribution Queue
                        </h3>
                        <button onclick="openTaskModal()" class="px-4 py-2 rounded-lg bg-amber-500/20 border border-amber-500/30 text-amber-400 hover:bg-amber-500/30 transition-all text-sm">
                            <i class="fas fa-plus mr-2"></i>New Task
                        </button>
                    </div>
                    <div class="p-4 space-y-3 max-h-64 overflow-y-auto">
                        <!-- Task 1 -->
                        <div class="p-3 rounded-xl bg-white/5 border-l-4 border-red-500 task-hover transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-0.5 rounded text-xs bg-red-500/20 text-red-400">HIGH</span>
                                    <span class="font-mono text-xs text-gray-500">TASK-0x7A3F</span>
                                </div>
                                <span class="text-xs text-cyan-400">SHADOW-SCANNER-01</span>
                            </div>
                            <p class="text-sm text-white mb-2">Full port scan on 10.0.0.0/24</p>
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span><i class="fas fa-clock mr-1"></i>Running: 12m</span>
                                <span class="text-emerald-400">Progress: 67%</span>
                            </div>
                            <div class="h-1.5 rounded-full bg-white/5 overflow-hidden mt-2">
                                <div class="h-full rounded-full bg-gradient-to-r from-red-500 to-orange-500" style="width: 67%"></div>
                            </div>
                        </div>
                        
                        <!-- Task 2 -->
                        <div class="p-3 rounded-xl bg-white/5 border-l-4 border-amber-500 task-hover transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-0.5 rounded text-xs bg-amber-500/20 text-amber-400">MEDIUM</span>
                                    <span class="font-mono text-xs text-gray-500">TASK-0x8B2E</span>
                                </div>
                                <span class="text-xs text-cyan-400">SHADOW-EXPLOIT-01</span>
                            </div>
                            <p class="text-sm text-white mb-2">EternalBlue exploitation attempt</p>
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span><i class="fas fa-clock mr-1"></i>Running: 5m</span>
                                <span class="text-amber-400">Progress: 34%</span>
                            </div>
                            <div class="h-1.5 rounded-full bg-white/5 overflow-hidden mt-2">
                                <div class="h-full rounded-full bg-gradient-to-r from-amber-500 to-yellow-500" style="width: 34%"></div>
                            </div>
                        </div>
                        
                        <!-- Task 3 -->
                        <div class="p-3 rounded-xl bg-white/5 border-l-4 border-emerald-500 task-hover transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-400">LOW</span>
                                    <span class="font-mono text-xs text-gray-500">TASK-0x9C1D</span>
                                </div>
                                <span class="text-xs text-cyan-400">SHADOW-ENUM-02</span>
                            </div>
                            <p class="text-sm text-white mb-2">BloodHound AD enumeration</p>
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span><i class="fas fa-clock mr-1"></i>Running: 23m</span>
                                <span class="text-emerald-400">Progress: 89%</span>
                            </div>
                            <div class="h-1.5 rounded-full bg-white/5 overflow-hidden mt-2">
                                <div class="h-full rounded-full bg-gradient-to-r from-emerald-500 to-cyan-500" style="width: 89%"></div>
                            </div>
                        </div>
                        
                        <!-- Task 4 - Queued -->
                        <div class="p-3 rounded-xl bg-white/5 border-l-4 border-purple-500 task-hover transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center gap-2">
                                    <span class="px-2 py-0.5 rounded text-xs bg-purple-500/20 text-purple-400">QUEUED</span>
                                    <span class="font-mono text-xs text-gray-500">TASK-0xAD4F</span>
                                </div>
                                <span class="text-xs text-gray-500">Waiting...</span>
                            </div>
                            <p class="text-sm text-white mb-2">Kerberoasting attack on DC</p>
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span><i class="fas fa-hourglass-half mr-1"></i>Queued: 3m ago</span>
                                <span class="text-purple-400">Pending assignment</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Section - Activity & Quick Actions -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
            <!-- Recent Activity -->
            <div class="glass rounded-2xl neon-border neon-blue overflow-hidden">
                <div class="bg-gradient-to-r from-blue-500/20 to-indigo-500/20 px-6 py-4 border-b border-blue-500/20">
                    <h3 class="text-lg font-bold text-blue-400 flex items-center gap-2">
                        <i class="fas fa-history"></i>
                        Recent Activity
                    </h3>
                </div>
                <div class="p-4 space-y-2 max-h-64 overflow-y-auto font-mono text-sm">
                    <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors">
                        <span class="text-emerald-400">[‚úì]</span>
                        <span class="text-gray-500">14:32:15</span>
                        <span class="text-white">TASK-0x7A3F completed on SHADOW-SCANNER-01</span>
                    </div>
                    <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors">
                        <span class="text-cyan-400">[‚Üí]</span>
                        <span class="text-gray-500">14:31:42</span>
                        <span class="text-white">New node discovered: 192.168.1.155</span>
                    </div>
                    <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors">
                        <span class="text-amber-400">[!]</span>
                        <span class="text-gray-500">14:30:18</span>
                        <span class="text-white">SHADOW-EXPLOIT-01 load threshold exceeded</span>
                    </div>
                    <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors">
                        <span class="text-purple-400">[+]</span>
                        <span class="text-gray-500">14:29:55</span>
                        <span class="text-white">TASK-0x8B2E assigned to SHADOW-EXPLOIT-01</span>
                    </div>
                    <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors">
                        <span class="text-red-400">[‚úó]</span>
                        <span class="text-gray-500">14:28:33</span>
                        <span class="text-white">SHADOW-RECON-03 went offline</span>
                    </div>
                    <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors">
                        <span class="text-emerald-400">[‚úì]</span>
                        <span class="text-gray-500">14:27:11</span>
                        <span class="text-white">BloodHound data collected: 2,847 objects</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="glass rounded-2xl neon-border neon-fuchsia overflow-hidden">
                <div class="bg-gradient-to-r from-fuchsia-500/20 to-pink-500/20 px-6 py-4 border-b border-fuchsia-500/20">
                    <h3 class="text-lg font-bold text-fuchsia-400 flex items-center gap-2">
                        <i class="fas fa-bolt"></i>
                        Quick Actions
                    </h3>
                </div>
                <div class="p-6 grid grid-cols-2 gap-4">
                    <button onclick="massTask('scan')" class="p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 hover:bg-purple-500/20 transition-all text-left group">
                        <i class="fas fa-search text-2xl text-purple-400 mb-2 group-hover:scale-110 transition-transform"></i>
                        <h4 class="font-semibold text-white">Mass Scan</h4>
                        <p class="text-xs text-gray-500">Distribute scan across all nodes</p>
                    </button>
                    
                    <button onclick="massTask('exploit')" class="p-4 rounded-xl bg-red-500/10 border border-red-500/30 hover:bg-red-500/20 transition-all text-left group">
                        <i class="fas fa-crosshairs text-2xl text-red-400 mb-2 group-hover:scale-110 transition-transform"></i>
                        <h4 class="font-semibold text-white">Auto Exploit</h4>
                        <p class="text-xs text-gray-500">Run exploits on discovered vulns</p>
                    </button>
                    
                    <button onclick="massTask('enum')" class="p-4 rounded-xl bg-blue-500/10 border border-blue-500/30 hover:bg-blue-500/20 transition-all text-left group">
                        <i class="fas fa-sitemap text-2xl text-blue-400 mb-2 group-hover:scale-110 transition-transform"></i>
                        <h4 class="font-semibold text-white">AD Enum</h4>
                        <p class="text-xs text-gray-500">Full Active Directory enumeration</p>
                    </button>
                    
                    <button onclick="massTask('exfil')" class="p-4 rounded-xl bg-amber-500/10 border border-amber-500/30 hover:bg-amber-500/20 transition-all text-left group">
                        <i class="fas fa-cloud-download-alt text-2xl text-amber-400 mb-2 group-hover:scale-110 transition-transform"></i>
                        <h4 class="font-semibold text-white">Collect Loot</h4>
                        <p class="text-xs text-gray-500">Gather results from all nodes</p>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- New Task Modal -->
<div id="taskModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="glass rounded-2xl neon-border neon-purple w-full max-w-lg">
        <div class="bg-gradient-to-r from-purple-500/20 to-violet-500/20 px-6 py-4 border-b border-purple-500/20 flex items-center justify-between">
            <h3 class="text-lg font-bold text-purple-400 flex items-center gap-2">
                <i class="fas fa-plus-circle"></i>
                Create New Task
            </h3>
            <button onclick="closeTaskModal()" class="text-gray-400 hover:text-white transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-400 mb-2">Task Name</label>
                <input type="text" id="taskName" placeholder="e.g., Network Reconnaissance Phase 1" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-purple-500/50">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-400 mb-2">Task Type</label>
                <select id="taskType" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-purple-500/50">
                    <option value="scan">üîç Network Scan</option>
                    <option value="exploit">üí• Exploitation</option>
                    <option value="enum">üìã Enumeration</option>
                    <option value="c2">üéØ C2 Operation</option>
                    <option value="custom">‚öôÔ∏è Custom Script</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-400 mb-2">Priority</label>
                <div class="flex gap-3">
                    <label class="flex-1">
                        <input type="radio" name="priority" value="high" class="hidden peer">
                        <div class="p-3 rounded-xl bg-white/5 border border-white/10 text-center cursor-pointer peer-checked:border-red-500/50 peer-checked:bg-red-500/10 transition-all">
                            <span class="text-red-400 font-semibold">High</span>
                        </div>
                    </label>
                    <label class="flex-1">
                        <input type="radio" name="priority" value="medium" class="hidden peer" checked>
                        <div class="p-3 rounded-xl bg-white/5 border border-white/10 text-center cursor-pointer peer-checked:border-amber-500/50 peer-checked:bg-amber-500/10 transition-all">
                            <span class="text-amber-400 font-semibold">Medium</span>
                        </div>
                    </label>
                    <label class="flex-1">
                        <input type="radio" name="priority" value="low" class="hidden peer">
                        <div class="p-3 rounded-xl bg-white/5 border border-white/10 text-center cursor-pointer peer-checked:border-emerald-500/50 peer-checked:bg-emerald-500/10 transition-all">
                            <span class="text-emerald-400 font-semibold">Low</span>
                        </div>
                    </label>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-400 mb-2">Target Node</label>
                <select id="targetNode" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-purple-500/50">
                    <option value="auto">ü§ñ Auto-assign (Best Available)</option>
                    <option value="shadow-scanner-01">SHADOW-SCANNER-01</option>
                    <option value="shadow-exploit-01">SHADOW-EXPLOIT-01</option>
                    <option value="shadow-enum-02">SHADOW-ENUM-02</option>
                    <option value="shadow-c2-master">SHADOW-C2-MASTER</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-400 mb-2">Description</label>
                <textarea id="taskDesc" rows="3" placeholder="Task details and objectives..." class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-purple-500/50 resize-none"></textarea>
            </div>
            
            <div class="flex gap-3 pt-4">
                <button onclick="closeTaskModal()" class="flex-1 py-3 rounded-xl bg-white/5 border border-white/10 text-gray-400 font-semibold hover:bg-white/10 transition-all">
                    Cancel
                </button>
                <button onclick="createTask()" class="flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500/20 to-violet-500/20 border border-purple-500/30 text-purple-400 font-semibold hover:from-purple-500/30 hover:to-violet-500/30 transition-all">
                    <i class="fas fa-rocket mr-2"></i>Launch Task
                </button>
            </div>
        </div>
    </div>
</div>

<script>
// Topology Chart
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('topologyChart');
    if (ctx) {
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Online', 'Busy', 'Offline'],
                datasets: [{
                    data: [8, 3, 1],
                    backgroundColor: ['#10b981', '#f59e0b', '#ef4444'],
                    borderColor: 'transparent',
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: { display: false }
                }
            }
        });
    }
});

// Discovery
function startDiscovery() {
    const status = document.getElementById('discoveryStatus');
    const foundNodes = document.getElementById('foundNodes');
    status.classList.remove('hidden');
    
    let count = 0;
    const interval = setInterval(() => {
        count += Math.floor(Math.random() * 3);
        foundNodes.textContent = count;
        if (count > 8) {
            clearInterval(interval);
            showNotification('Discovery Complete', `Found ${count} nodes on the network`, 'success');
        }
    }, 500);
}

function refreshNodes() {
    showNotification('Refreshing', 'Updating node status...', 'info');
}

// Task Modal
function openTaskModal() {
    document.getElementById('taskModal').classList.remove('hidden');
}

function closeTaskModal() {
    document.getElementById('taskModal').classList.add('hidden');
}

function createTask() {
    const name = document.getElementById('taskName').value || 'Unnamed Task';
    closeTaskModal();
    showNotification('Task Created', `"${name}" added to queue`, 'success');
}

// Quick Actions
function massTask(type) {
    const types = {
        scan: 'Mass network scan initiated',
        exploit: 'Auto-exploit sequence started',
        enum: 'AD enumeration distributed',
        exfil: 'Loot collection started'
    };
    showNotification('Task Distributed', types[type], 'success');
}
</script>
{% endblock %}
