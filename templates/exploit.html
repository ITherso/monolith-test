<!DOCTYPE html>
<html>
<head>
    <title>Auto Exploit Console</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body style="background:#111; color:#0f0; font-family:monospace;">
    <h1>ðŸš€ Prof.Attack-Tool - Exploit Chaining Console</h1>
    <input type="text" id="lhost" placeholder="LHOST (tun0 IP)" value="10.10.10.10">
    <button onclick="refreshSessions()">Refresh Sessions</button>
    <hr>
    <div id="sessions"></div>

    <script>
        const socket = io();
        let currentSession = null;

        function refreshSessions() {
            $.get('/api/sessions', function(data) {
                $('#sessions').empty();
                for (let [id, info] of Object.entries(data)) {
                    $('#sessions').append(`
                        <div style="border:1px solid #0f0; padding:10px; margin:10px;">
                            <b>Session ${id}</b> - ${info.tunnel_peer}<br>
                            <button onclick="openShell(${id})">Open Shell</button>
                        </div>
                    `);
                }
            });
        }

        function openShell(sid) {
            currentSession = sid;
            $('#shell').remove();
            $('body').append(`
                <div id="shell" style="margin-top:20px;">
                    <h3>Shell ${sid}</h3>
                    <pre id="output" style="background:#000; height:400px; overflow:y; padding:10px;"></pre>
                    <input id="cmd" placeholder="Komut gir..." style="width:80%" onkeypress="if(event.key==='Enter') sendCmd()">
                    <button onclick="sendCmd()">GÃ¶nder</button>
                </div>
            `);
        }

        function sendCmd() {
            let cmd = $('#cmd').val();
            $('#output').append(`> ${cmd}\n`);
            socket.emit('shell_command', {session_id: currentSession, command: cmd});
            $('#cmd').val('');
        }

        socket.on('shell_output', function(data) {
            $('#output').append(data.output + '\n');
            $('#output').scrollTop($('#output')[0].scrollHeight);
        });

        setInterval(refreshSessions, 5000);
        refreshSessions();
    </script>
</body>
</html>