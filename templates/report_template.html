<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <title>Security Report - MONOLITH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            dark: '#0a0a12',
                            primary: '#00ff88',
                            danger: '#ff4757',
                            warning: '#ffa502',
                            purple: '#a855f7'
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; background: linear-gradient(135deg, #0a0a12 0%, #12121f 50%, #0a0a12 100%); min-height: 100vh; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .glass { background: rgba(30, 30, 46, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
        .neon-border { border: 1px solid rgba(0, 255, 136, 0.3); box-shadow: 0 0 20px rgba(0, 255, 136, 0.1); }
    </style>
</head>
<body class="text-white">
    <div class="container-fluid px-4 py-4">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="text-center mb-5">
                    <h1 class="text-4xl font-bold mb-2">
                        <span class="bg-gradient-to-r from-cyber-primary to-cyber-secondary bg-clip-text text-transparent">
                            <i class="fas fa-file-shield mr-2"></i>SECURITY ASSESSMENT REPORT
                        </span>
                    </h1>
                    <p class="text-gray-400">Scan ID: #{{ scan_id }} | Target: {{ target }}</p>
                </div>
                
                <!-- Risk Score -->
                <div class="glass rounded-2xl p-6 mb-4 neon-border text-center">
                    <div class="row align-items-center">
                        <div class="col-md-4">
                            <div style="width: 120px; height: 120px; border-radius: 50%; border: 8px solid; margin: 0 auto;"
                                 class="{{ 'border-cyber-danger' if report.risk_score >= 80 else 'border-cyber-warning' if report.risk_score >= 60 else 'border-yellow-500' if report.risk_score >= 40 else 'border-cyber-primary' }}">
                                <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 2.5em; font-weight: bold;">
                                    {{ report.risk_score }}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8 text-left">
                            <h2 class="text-2xl font-bold mb-3">
                                {{ 'CRITICAL RISK' if report.risk_score >= 80 else 'HIGH RISK' if report.risk_score >= 60 else 'MEDIUM RISK' if report.risk_score >= 40 else 'LOW RISK' }}
                            </h2>
                            <div class="grid grid-cols-4 gap-3">
                                <div class="text-center p-3 bg-black/30 rounded-lg">
                                    <div class="text-2xl font-bold text-cyber-danger">{{ report.critical_count }}</div>
                                    <small class="text-gray-400">Critical</small>
                                </div>
                                <div class="text-center p-3 bg-black/30 rounded-lg">
                                    <div class="text-2xl font-bold text-cyber-warning">{{ report.high_count }}</div>
                                    <small class="text-gray-400">High</small>
                                </div>
                                <div class="text-center p-3 bg-black/30 rounded-lg">
                                    <div class="text-2xl font-bold text-yellow-500">{{ report.finding_count - report.critical_count - report.high_count }}</div>
                                    <small class="text-gray-400">Other</small>
                                </div>
                                <div class="text-center p-3 bg-black/30 rounded-lg">
                                    <div class="text-sm font-mono text-cyber-primary break-all">{{ report.content_hash[:16] }}...</div>
                                    <small class="text-gray-400">Report Hash</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Download Options -->
                <div class="glass rounded-2xl p-4 mb-4">
                    <h3 class="text-lg font-semibold mb-3">
                        <i class="fas fa-download mr-2"></i>DOWNLOAD REPORT
                    </h3>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <a href="/download/report/{{ scan_id }}?format=html" 
                               class="btn btn-outline-primary w-100 py-3" style="border-width: 2px;">
                                <i class="fas fa-file-code mr-2"></i>HTML Report
                            </a>
                        </div>
                        <div class="col-md-4 mb-3">
                            <a href="/download/report/{{ scan_id }}?format=pdf" 
                               class="btn btn-outline-danger w-100 py-3" style="border-width: 2px;">
                                <i class="fas fa-file-pdf mr-2"></i>PDF Report
                            </a>
                        </div>
                        <div class="col-md-4 mb-3">
                            <a href="/download/report/{{ scan_id }}?format=json" 
                               class="btn btn-outline-warning w-100 py-3" style="border-width: 2px;">
                                <i class="fas fa-file-code mr-2"></i>JSON Data
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- View Report -->
                <div class="glass rounded-2xl p-4">
                    <h3 class="text-lg font-semibold mb-3">
                        <i class="fas fa-eye mr-2"></i>VIEW FULL REPORT
                    </h3>
                    <div class="text-center py-4">
                        <a href="/details/{{ scan_id }}" class="btn btn-cyber btn-cyber-primary px-5 py-3">
                            <i class="fas fa-external-link-alt mr-2"></i>OPEN DETAILED REPORT
                        </a>
                    </div>
                </div>
                
                <!-- Back -->
                <div class="text-center mt-4">
                    <a href="/scans" class="btn btn-outline-secondary" style="border-width: 2px;">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Scans
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>