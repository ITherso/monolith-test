{% extends "base.html" %}

{% block body %}
<div class="min-h-screen">
    <!-- Background Effects -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none -z-10">
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-cyber-primary/10 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-cyber-secondary/10 rounded-full blur-3xl"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-cyber-purple/5 rounded-full blur-3xl"></div>
    </div>

    <div class="container mx-auto px-6 py-8">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-cyber-primary/20 to-cyber-secondary/20 flex items-center justify-center neon-border">
                        <i class="fas fa-shield-alt text-cyber-primary text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white flex items-center gap-3">
                            SHADOW <span class="text-cyber-primary">ARSENAL</span>
                        </h1>
                        <p class="text-gray-400 text-sm mt-1">Advanced Penetration Testing Platform v68.0</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="glass rounded-xl px-4 py-2 flex items-center gap-3">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-cyber-primary status-pulse"></div>
                            <span class="text-cyber-primary text-sm font-medium">System Online</span>
                        </div>
                        <span class="text-gray-600">|</span>
                        <span class="text-gray-400 text-sm">{{ session.get('user', 'Analyst') }}</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Quick Access Grid -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <i class="fas fa-bolt text-cyber-warning"></i>
                QUICK ACCESS
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                <a href="/kerberos" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-warning/20 hover:border-cyber-warning/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-warning/10 flex items-center justify-center group-hover:bg-cyber-warning/20 transition-colors">
                        <i class="fas fa-key text-cyber-warning text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Kerberos</span>
                </a>
                
                <a href="/distributed/0" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-secondary/20 hover:border-cyber-secondary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-secondary/10 flex items-center justify-center group-hover:bg-cyber-secondary/20 transition-colors">
                        <i class="fas fa-sitemap text-cyber-secondary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Distributed Agents</span>
                </a>
                
                <a href="/infra" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-secondary/20 hover:border-cyber-secondary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-secondary/10 flex items-center justify-center group-hover:bg-cyber-secondary/20 transition-colors">
                        <i class="fas fa-network-wired text-cyber-secondary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Infrastructure</span>
                </a>
                
                <a href="/exploits" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-purple/20 hover:border-cyber-purple/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-purple/10 flex items-center justify-center group-hover:bg-cyber-purple/20 transition-colors">
                        <i class="fas fa-bug text-cyber-purple text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Exploits</span>
                </a>
                
                <a href="/phishing" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-primary/20 hover:border-cyber-primary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-primary/10 flex items-center justify-center group-hover:bg-cyber-primary/20 transition-colors">
                        <i class="fas fa-envelope text-cyber-primary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Phishing</span>
                </a>
                
                <a href="/golden" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-yellow-500/20 hover:border-yellow-500/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-yellow-500/10 flex items-center justify-center group-hover:bg-yellow-500/20 transition-colors">
                        <i class="fas fa-gem text-yellow-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Golden Ticket</span>
                </a>
                
                <a href="/attack-graph" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-secondary/20 hover:border-cyber-secondary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-secondary/10 flex items-center justify-center group-hover:bg-cyber-secondary/20 transition-colors">
                        <i class="fas fa-project-diagram text-cyber-secondary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Attack Graph</span>
                </a>
                
                <a href="/c2" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-purple/20 hover:border-cyber-purple/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-purple/10 flex items-center justify-center group-hover:bg-cyber-purple/20 transition-colors">
                        <i class="fas fa-microchip text-cyber-purple text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">C2 Implant</span>
                </a>
                
                <a href="/payloads" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-primary/20 hover:border-cyber-primary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-primary/10 flex items-center justify-center group-hover:bg-cyber-primary/20 transition-colors">
                        <i class="fas fa-terminal text-cyber-primary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Payloads</span>
                </a>
                
                <a href="/scans" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-secondary/20 hover:border-cyber-secondary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-secondary/10 flex items-center justify-center group-hover:bg-cyber-secondary/20 transition-colors">
                        <i class="fas fa-list-check text-cyber-secondary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Scans</span>
                </a>
                
                <a href="/autoexploit" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-danger/20 hover:border-cyber-danger/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-danger/10 flex items-center justify-center group-hover:bg-cyber-danger/20 transition-colors">
                        <i class="fas fa-bolt text-cyber-danger text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">AutoExploit</span>
                </a>
                
                <a href="/opsec" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-purple/20 hover:border-cyber-purple/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-purple/10 flex items-center justify-center group-hover:bg-cyber-purple/20 transition-colors">
                        <i class="fas fa-shield-alt text-cyber-purple text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">OpSec</span>
                </a>
                
                <a href="/decentralized" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyber-primary/20 hover:border-cyber-primary/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyber-primary/10 flex items-center justify-center group-hover:bg-cyber-primary/20 transition-colors">
                        <i class="fas fa-link text-cyber-primary text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">DeFi</span>
                </a>
                
                <a href="/attack-playground" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-red-500/20 hover:border-red-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-red-500/10 flex items-center justify-center group-hover:bg-red-500/20 transition-colors">
                        <i class="fas fa-skull-crossbones text-red-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Attack Lab</span>
                </a>
                
                <a href="/relay" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-orange-500/20 hover:border-orange-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-orange-500/10 flex items-center justify-center group-hover:bg-orange-500/20 transition-colors">
                        <i class="fas fa-exchange-alt text-orange-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">NTLM Relay</span>
                </a>
                
                <a href="/evasion" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyan-500/20 hover:border-cyan-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-cyan-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-cyan-500/10 flex items-center justify-center group-hover:bg-cyan-500/20 transition-colors">
                        <i class="fas fa-shield-virus text-cyan-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Evasion Test</span>
                </a>
                
                <a href="/lateral" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-pink-500/20 hover:border-pink-500/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-pink-500/10 flex items-center justify-center group-hover:bg-pink-500/20 transition-colors">
                        <i class="fas fa-arrows-alt text-pink-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Lateral Move</span>
                </a>
                
                <a href="/quantum" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-violet-500/20 hover:border-violet-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-violet-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-violet-500/10 flex items-center justify-center group-hover:bg-violet-500/20 transition-colors">
                        <i class="fas fa-atom text-violet-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Quantum Crypto</span>
                </a>
                
                <a href="/cloud" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-sky-500/20 hover:border-sky-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-sky-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-sky-500/10 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors">
                        <i class="fas fa-cloud text-sky-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Cloud Pivot</span>
                </a>
                
                <a href="/evasion/adversarial" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-red-500/20 hover:border-red-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center group-hover:from-red-500/30 group-hover:to-orange-500/30 transition-colors">
                        <i class="fas fa-brain text-red-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">AI Adversarial</span>
                </a>
                
                <a href="/zeroday" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-purple-500/20 hover:border-purple-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-purple-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center group-hover:from-purple-500/30 group-hover:to-pink-500/30 transition-colors">
                        <i class="fas fa-bug text-purple-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Zero-Day</span>
                </a>
                
                <a href="/vr" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-cyan-500/20 hover:border-cyan-500/40 relative">
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-cyan-500 rounded-full animate-pulse"></div>
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-gradient-to-br from-cyan-500/20 to-purple-500/20 flex items-center justify-center group-hover:from-cyan-500/30 group-hover:to-purple-500/30 transition-colors">
                        <i class="fas fa-vr-cardboard text-cyan-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">VR/AR Viz</span>
                </a>
                
                <a href="/evasion/amsi/" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-red-500/20 hover:border-red-500/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-red-500/10 flex items-center justify-center group-hover:bg-red-500/20 transition-colors">
                        <i class="fas fa-virus-slash text-red-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">AMSI Bypass</span>
                </a>
                
                <a href="/evasion/sleep/" class="glass rounded-xl p-4 hover-lift transition-all duration-300 text-center group border border-amber-500/20 hover:border-amber-500/40">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-lg bg-amber-500/10 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors">
                        <i class="fas fa-moon text-amber-500 text-xl"></i>
                    </div>
                    <span class="text-gray-300 font-medium text-sm">Sleepmask</span>
                </a>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Content -->
            <div class="lg:col-span-2 space-y-6">
                <!-- New Attack Vector -->
                <div class="glass rounded-2xl overflow-hidden neon-border">
                    <div class="px-6 py-4 border-b border-cyber-primary/20 bg-cyber-primary/5">
                        <h3 class="text-lg font-semibold text-cyber-primary flex items-center gap-2">
                            <i class="fas fa-rocket"></i>
                            NEW ATTACK VECTOR
                        </h3>
                    </div>
                    <div class="p-6">
                        <form action="/scan" method="post" class="space-y-6">
                            <!-- Target Input -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    <i class="fas fa-crosshairs text-cyber-primary mr-2"></i>
                                    TARGET URL / IP
                                </label>
                                <input type="text" name="target" 
                                       class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-cyber-primary/50 focus:ring-2 focus:ring-cyber-primary/20 transition-all font-mono"
                                       placeholder="https://example.com veya 192.168.1.1" required>
                            </div>
                            
                            <!-- AD Domain (Optional) -->
                            <div>
                                <label class="block text-sm font-medium text-gray-400 mb-2">
                                    <small>Active Directory Domain (Optional)</small>
                                </label>
                                <input type="text" name="ad_domain" 
                                       class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-cyber-primary/50 focus:ring-2 focus:ring-cyber-primary/20 transition-all font-mono"
                                       placeholder="corp.local">
                            </div>
                            
                            <!-- Scan Modules -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Core Engine -->
                                <div class="glass-light rounded-xl p-4">
                                    <h4 class="text-cyber-primary font-semibold mb-4 flex items-center gap-2">
                                        <i class="fas fa-ghost"></i>
                                        CORE ENGINE
                                    </h4>
                                    <div class="space-y-3">
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="python_scan" checked class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-primary focus:ring-cyber-primary/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Full Ghost Analysis (Python)</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="nmap" checked class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-primary focus:ring-cyber-primary/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Nmap Port Scan</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="nuclei" checked class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-primary focus:ring-cyber-primary/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Nuclei Vuln Scanner</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="gobuster" checked class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-primary focus:ring-cyber-primary/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Gobuster Directory Brute</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="supply_chain" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-primary focus:ring-cyber-primary/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Supply Chain Audit</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="zeroday" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-primary focus:ring-cyber-primary/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Zero-Day Research</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Shadow Modules -->
                                <div class="glass-light rounded-xl p-4">
                                    <h4 class="text-cyber-danger font-semibold mb-4 flex items-center gap-2">
                                        <i class="fas fa-radiation"></i>
                                        SHADOW MODULES
                                    </h4>
                                    <div class="space-y-3">
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="ad_enum" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Active Directory Enum</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="waf_bypass" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">WAF Bypass Engine</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="llm_analysis" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">LLM Vuln Analysis</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="ai_prediction" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">AI Vulnerability Prediction</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="blockchain" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Blockchain Evidence</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="cloud_audit" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Cloud Security Audit</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="api_scan" class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">API Security Scan</span>
                                        </label>
                                        <label class="flex items-center gap-3 cursor-pointer group">
                                            <input type="checkbox" name="tools" value="gamification" checked class="w-4 h-4 rounded border-white/20 bg-white/5 text-cyber-danger focus:ring-cyber-danger/50">
                                            <span class="text-gray-300 group-hover:text-white transition-colors">Gamification & XP</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <button type="submit" class="w-full py-4 rounded-xl bg-gradient-to-r from-cyber-primary to-cyber-secondary text-[#0a0a12] font-bold text-lg hover:from-cyber-primary/90 hover:to-cyber-secondary/90 transition-all hover-lift flex items-center justify-center gap-2">
                                <i class="fas fa-play"></i>
                                <span>INITIATE ATTACK VECTOR</span>
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Recent Operations -->
                <div class="glass rounded-2xl overflow-hidden neon-border">
                    <div class="px-6 py-4 border-b border-yellow-500/20 bg-yellow-500/5">
                        <h3 class="text-lg font-semibold text-yellow-500 flex items-center gap-2">
                            <i class="fas fa-history"></i>
                            RECENT OPERATIONS
                        </h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-white/5">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider">ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider">Target</th>
                                    <th class="px-6 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-right text-xs font-semibold text-gray-400 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-white/5">
                                {% for scan in scans %}
                                <tr class="hover:bg-white/5 transition-colors" data-scan-id="{{ scan[0] }}">
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-yellow-500 font-bold">#{{ scan[0] }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <code class="text-cyber-primary text-sm bg-cyber-primary/10 px-3 py-1 rounded-lg border border-cyber-primary/20">{{ scan[1][:35] }}{% if scan[1]|length > 35 %}...{% endif %}</code>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            {% if 'COMPLETED' in scan[3] or 'TAMAMLANDI' in scan[3] %}
                                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-cyber-primary/10 text-cyber-primary border border-cyber-primary/20">‚úì COMPLETED</span>
                                            {% elif 'FAILED' in scan[3] or 'HATA' in scan[3] %}
                                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-cyber-danger/10 text-cyber-danger border border-cyber-danger/20">‚úó FAILED</span>
                                            {% else %}
                                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-cyber-warning/10 text-cyber-warning border border-cyber-warning/20">‚è≥ {{ scan[3][:15] }}</span>
                                            {% endif %}
                                            <div class="flex-1 h-2 bg-white/10 rounded-full overflow-hidden">
                                                <div class="h-full bg-gradient-to-r from-cyber-warning to-cyber-primary scan-progress rounded-full transition-all duration-500" style="width: {{ scan[5] or 0 }}%"></div>
                                            </div>
                                        </div>
                                        {% if scan[6] is not none %}
                                        <p class="text-xs text-gray-500 mt-2">ETA: {{ scan[6] }}s</p>
                                        {% endif %}
                                    </td>
                                    <td class="px-6 py-4 text-right">
                                        <div class="flex items-center justify-end gap-2">
                                            <a href="/details/{{ scan[0] }}" class="p-2 rounded-lg bg-cyber-secondary/10 text-cyber-secondary hover:bg-cyber-secondary/20 transition-colors" title="Details">
                                                <i class="fas fa-file-alt text-sm"></i>
                                            </a>
                                            <a href="/delete/{{ scan[0] }}" class="p-2 rounded-lg bg-cyber-danger/10 text-cyber-danger hover:bg-cyber-danger/20 transition-colors" title="Delete" onclick="return confirm('Delete?')">
                                                <i class="fas fa-trash text-sm"></i>
                                            </a>
                                            {% if 'A√áIK VAR' in scan[3] %}
                                            <a href="/autoexploit/{{ scan[0] }}" class="p-2 rounded-lg bg-cyber-warning/10 text-cyber-warning hover:bg-cyber-warning/20 transition-colors" title="AutoExploit">
                                                <i class="fas fa-bolt text-sm"></i>
                                            </a>
                                            {% endif %}
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Post-Exploitation Suite -->
                <div class="glass rounded-2xl overflow-hidden neon-border">
                    <div class="px-5 py-4 border-b border-cyber-danger/20 bg-cyber-danger/5">
                        <h3 class="text-lg font-semibold text-cyber-danger flex items-center gap-2">
                            <i class="fas fa-bolt"></i>
                            POST-EXPLOITATION
                        </h3>
                    </div>
                    <div class="p-5">
                        <p class="text-gray-400 text-sm mb-4">Advanced tools for initial access & persistence</p>
                        <div class="space-y-3">
                            <a href="/payloads" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-cyber-primary transition-all group">
                                <i class="fas fa-terminal w-5 text-center"></i>
                                <span class="text-gray-300 group-hover:text-white">Reverse Shell Generator</span>
                            </a>
                            <a href="/phishing" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-yellow-500 transition-all group">
                                <i class="fas fa-envelope-at w-5 text-center"></i>
                                <span class="text-gray-300 group-hover:text-white">Phishing Campaigns</span>
                            </a>
                            <a href="/autoexploit" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-cyber-danger transition-all group">
                                <i class="fas fa-bolt w-5 text-center"></i>
                                <span class="text-gray-300 group-hover:text-white">AutoExploit Framework</span>
                            </a>
                            <a href="/opsec" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-cyber-purple transition-all group">
                                <i class="fas fa-shield-alt w-5 text-center"></i>
                                <span class="text-gray-300 group-hover:text-white">OpSec Engine</span>
                            </a>
                        </div>
                        
                        <!-- AI Payload Generator -->
                        <div class="rounded-xl overflow-hidden">
                            <a href="/ai-payload" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-cyber-secondary transition-all group">
                                <i class="fas fa-robot w-5 text-center text-cyber-secondary"></i>
                                <span class="text-gray-300 group-hover:text-white">AI Payload Gen</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="glass rounded-2xl overflow-hidden neon-border">
                    <div class="px-5 py-4 border-b border-yellow-500/20 bg-yellow-500/5">
                        <h3 class="text-lg font-semibold text-yellow-500 flex items-center gap-2">
                            <i class="fas fa-trophy"></i>
                            LEADERBOARD
                        </h3>
                    </div>
                    <div class="p-5">
                        {% for entry in leaderboard %}
                        <div class="flex items-center gap-3 py-2 {% if not loop.last %}border-b border-white/5{% endif %}">
                            <div class="w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm {% if loop.index == 1 %}bg-yellow-500/20 text-yellow-500{% elif loop.index == 2 %}bg-gray-400/20 text-gray-400{% elif loop.index == 3 %}bg-orange-600/20 text-orange-600{% else %}bg-white/5 text-gray-400{% endif %}">
                                {{ loop.index }}
                            </div>
                            <div class="flex-1">
                                <p class="text-white font-medium">{{ entry['user'] }}</p>
                                <p class="text-yellow-500 text-sm">{{ entry['score'] }} XP</p>
                            </div>
                        </div>
                        {% endfor %}
                        {% if not leaderboard %}
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-trophy text-3xl mb-3 opacity-30"></i>
                            <p class="text-sm">No leaderboard data yet</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- System Status -->
                <div class="glass rounded-2xl overflow-hidden neon-border">
                    <div class="px-5 py-4 border-b border-cyber-primary/20 bg-cyber-primary/5">
                        <h3 class="text-lg font-semibold text-cyber-primary flex items-center gap-2">
                            <i class="fas fa-server"></i>
                            SYSTEM STATUS
                        </h3>
                    </div>
                    <div class="p-5 space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">LLM Engine</span>
                            <span class="px-3 py-1 rounded-full text-xs font-medium {{ 'bg-cyber-primary/10 text-cyber-primary border border-cyber-primary/20' if has_openai else 'bg-cyber-warning/10 text-cyber-warning border border-cyber-warning/20' }}">
                                {{ 'ONLINE' if has_openai else 'SIMULATION' }}
                            </span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">AD Module</span>
                            <span class="px-3 py-1 rounded-full text-xs font-medium {{ 'bg-cyber-primary/10 text-cyber-primary border border-cyber-primary/20' if has_ldap else 'bg-cyber-warning/10 text-cyber-warning border border-cyber-warning/20' }}">
                                {{ 'ACTIVE' if has_ldap else 'LIMITED' }}
                            </span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">Tool Check</span>
                            <span class="px-3 py-1 rounded-full text-xs font-medium {{ 'bg-cyber-primary/10 text-cyber-primary border border-cyber-primary/20' if tools_ok else 'bg-cyber-danger/10 text-cyber-danger border border-cyber-danger/20' }}">
                                {{ available_tools }}/{{ total_tools }} Ready
                            </span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">Blockchain</span>
                            <span class="px-3 py-1 rounded-full text-xs font-medium {{ 'bg-cyber-primary/10 text-cyber-primary border border-cyber-primary/20' if blockchain_ready else 'bg-cyber-warning/10 text-cyber-warning border border-cyber-warning/20' }}">
                                {{ 'READY' if blockchain_ready else 'SIM' }}
                            </span>
                        </div>
                        <a href="/decentralized" class="w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 border border-cyber-secondary/30 text-cyber-secondary hover:bg-cyber-secondary/10 transition-all">
                            <i class="fas fa-link"></i>
                            <span>Decentralized Network</span>
                        </a>
                    </div>
                </div>

                <!-- Evasion Status -->
                <div class="glass rounded-2xl overflow-hidden neon-border">
                    <div class="px-5 py-4 border-b border-cyber-danger/20 bg-cyber-danger/5">
                        <h3 class="text-lg font-semibold text-cyber-danger flex items-center gap-2">
                            <i class="fas fa-user-secret"></i>
                            EVASION STATUS
                        </h3>
                    </div>
                    <div class="p-5 space-y-4">
                        <div class="text-center">
                            <div class="relative inline-block">
                                <div class="w-24 h-24 rounded-full bg-cyber-danger/10 flex items-center justify-center border-2 border-cyber-danger/30">
                                    <span class="text-3xl font-bold text-cyber-danger">95%</span>
                                </div>
                                <svg class="absolute inset-0 w-24 h-24 -rotate-90">
                                    <circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="4" fill="none" class="text-white/10"/>
                                    <circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="4" fill="none" class="text-cyber-danger" stroke-dasharray="251.2" stroke-dashoffset="12.56"/>
                                </svg>
                            </div>
                            <p class="text-gray-400 text-sm mt-2">Evasion Success Rate</p>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-cyber-primary">142</p>
                                <p class="text-xs text-gray-400">Timestomp</p>
                            </div>
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-cyber-secondary">89</p>
                                <p class="text-xs text-gray-400">Log Clear</p>
                            </div>
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-cyber-purple">67</p>
                                <p class="text-xs text-gray-400">Artifacts</p>
                            </div>
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-cyber-warning">234</p>
                                <p class="text-xs text-gray-400">AV Bypass</p>
                            </div>
                        </div>
                        
                        <a href="/opsec" class="w-full mt-2 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-cyber-danger/10 border border-cyber-danger/30 text-cyber-danger hover:bg-cyber-danger/20 transition-all">
                            <i class="fas fa-shield-alt"></i>
                            <span>OpSec Panel</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    async function refreshScanProgress() {
        const rows = document.querySelectorAll('tr[data-scan-id]');
        for (const row of rows) {
            const scanId = row.getAttribute('data-scan-id');
            if (!scanId) continue;
            try {
                const res = await fetch(`/scan_status/${scanId}`);
                if (!res.ok) continue;
                const data = await res.json();
                const bar = row.querySelector('.scan-progress');
                const eta = row.querySelector('p.text-xs.text-gray-500.mt-2');
                if (bar) bar.style.width = `${data.progress || 0}%`;
                if (eta && data.eta_seconds) eta.textContent = `ETA: ${data.eta_seconds}s`;
            } catch (e) {}
        }
    }
<a href="/distributed/{{ scan_id }}" target="_blank">üåê Distributed Agents Console</a>
    refreshScanProgress();
    setInterval(refreshScanProgress, 5000);
</script>
{% endblock %}
